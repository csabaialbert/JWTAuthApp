<mat-dialog-content>
    <title mat-dialog-title>Dear {{accountName}}, you can change your password with the form below:</title>
    <div class=" flex items-center justify-center">
        <form  [formGroup]="changePasswordForm" (ngSubmit)="changePassword(changePasswordForm)">
            @for(error of errors; track error){
                <div class="bg-red-100 border mb-2 flex flex-col gap-2 border-red-400 text-red-400 py-4 px-4 rounded-md relative">
                    <div class="text-xs">{{error.description}}</div>
                </div>
            }
            
            <mat-form-field class="w-full">
                <mat-label>Old password</mat-label>
                <input  matInput type="{{oldPasswordHide ? 'password' : 'text'}}" placeholder="Old Password" formControlName="oldPassword">
                <mat-icon matSuffix (click)="oldPasswordHide = !oldPasswordHide">{{oldPasswordHide ? 'visibility_off' : 'visibility'}}</mat-icon>
                <mat-icon matPrefix>lock</mat-icon>
            </mat-form-field>

            <mat-form-field class="w-full">
                <mat-label>New password</mat-label>
                <input matInput type="{{newPasswordHide ? 'password' : 'text'}}" placeholder="New Password" formControlName="newPassword">
                <mat-icon matSuffix (click)="newPasswordHide = !newPasswordHide">{{newPasswordHide ? 'visibility_off' : 'visibility'}}</mat-icon>
                <mat-icon matPrefix>lock</mat-icon>
            </mat-form-field>
            <mat-form-field class="w-full">
                <mat-label>Confirm password</mat-label>
                <input matInput type="{{confirmPasswordHide ? 'password' : 'text'}}" placeholder="Confirm Password" formControlName="confirmPassword">
                <mat-icon matSuffix (click)="confirmPasswordHide = !confirmPasswordHide">{{confirmPasswordHide ? 'visibility_off' : 'visibility'}}</mat-icon>
                <mat-icon matPrefix>lock</mat-icon>
            </mat-form-field>
            <div *ngIf="changePasswordForm.hasError('passwordMismatch') && changePasswordForm.get('confirmPassword')?.dirty && changePasswordForm.get('confirmPassword')?.touched" class="bg-red-100 border mb-2 flex flex-col gap-2 border-red-400 text-red-400 py-4 px-4 rounded-md relative">
                <div class="text-xs">The new password and confirm password does not match!</div>
            </div>
    
            <button [disabled]="changePasswordForm.invalid"
            type="submit" [disabled]="!changePasswordForm.valid" class="w-full border border-slate-300 disabled:bg-gray-800 bg-green-900 hover:bg-green-700 text-white font-bold py-4">
            Change password
            </button>
        </form>
    </div>
   
</mat-dialog-content>
<mat-dialog-actions>
    <button mat-raised-button (click)="cancel()">Cancel</button>
</mat-dialog-actions>